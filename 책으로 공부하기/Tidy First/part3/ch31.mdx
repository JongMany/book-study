# 결합도와 결합도 제거

결합도는 직접 경험하기 전까지 잘 드러나지 않음...

결합도가 존재하는 이유

- 현금흐름할인은 일부 결합도를 설명할 수 있음.
  - 결합도가 생겨도 빠르게 코드를 작성하는 길을 선택할 수도 있고, 결합도 없이 긴 시간과 많은 노력을 들여서 코드를 작성할 수 있음.
  - 초반에는 결합도가 있어도 구현하는 것이 경제적으로 올바른 결정이 될 가능성이 높음(수익은 먼저, 비용은 나중에)
- 시스템에 결합도가 있는 이유는 그동안 문제가 되지 않기 때문이었음.
- 어떤 결합도는 피할 수 없기 때문에

결합도가 존재하는 이유보다는 결합도 비용을 지불할 것인지가 중요함 (결합도 비용을 지불할 것인지, 결합도를 없애는 비용을 지불할 것인지)

```
Sender>>send()
  writeField1()
  writeField2()

Receiver>>receive()
  readField1()
  readField2()
```

두 함수 사이에는 결합도가 있음. 하나의 함수를 변경하면 다른 함수도 변경해야 함. (변경사항을 완벽히 동기화하여 배포하는 것에 대해 걱정을 해야 함.)

** 인터페이스로 쓰일 언어를 정의해야 함. (인터페이스를 통해 결합도를 제거할 수 있음.)**

```
format = [
  {field: "1", type: "integer"},
  {field: "2", type: "string"}
]

Sender>>send()
  writeFields(format)

Receiver>>receive()
  readFields(format)
```

한 곳에서 format을 변경할 수 있게 되었고, `send`와 `receive`를 통시에 변경할 필요가 없어짐

그러나 결합도가 완전히 사라진 것은 아님..  
`format`에 세번째 필드를 추가하는 것은 `format`에서 가능함.  
그러나 Sender 내부에는 3번째 필드를 계산하도록 구현해야함. 이작업을 완료해야 `receive` 함수에서 해당 필드를 읽고 쓸 수 있음. ➡️ `Sender`와 `Receiver`는 여전히 결합되어 있음.

단 이러한 작업을 통해서 구현순서에 대해 많은 옵션을 가질 수 있게 되는 것임.

** 한 종류의 코드 변경에 대한 결합도롤 줄일수록 다른 종류의 코드 변경에 대한 결합도가 커진다**
➡️ 모든 결합을 색출하여 없애려고 노력하지 말자.
